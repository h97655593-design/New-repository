<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ø§Ø·Ø± | Nater</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4e73df">
<link rel="apple-touch-icon" href="icon-192.png">

<style>
body{margin:0;font-family:'Segoe UI',sans-serif;direction:rtl;background:#f4f6f9;transition:.3s}
.dark{background:#121826;color:#fff}
header{background:linear-gradient(135deg,#4e73df,#1cc88a);color:#fff;padding:25px;text-align:center}
nav button{margin:5px;padding:8px 15px;border:none;border-radius:20px;cursor:pointer;font-weight:bold}
.container{max-width:1100px;margin:auto;padding:20px}
.card{background:#fff;padding:20px;border-radius:15px;box-shadow:0 8px 20px rgba(0,0,0,.08);margin-bottom:20px}
.dark .card{background:#1e293b}
input{width:100%;padding:8px;margin:6px 0;border-radius:10px;border:1px solid #ddd}
button.main{background:#4e73df;color:#fff;width:100%;padding:8px;border:none;border-radius:10px;cursor:pointer;margin-top:5px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:10px;margin-top:15px}
.box{height:80px;border-radius:15px;display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:bold;cursor:pointer;background:#e74a3b;color:#fff;transition:.3s;position:relative}
.box.ready{background:#1cc88a;animation:pulse 1s}
.ready-label{font-size:12px;margin-top:4px}
.badge{background:#1cc88a;color:#fff;padding:4px 10px;border-radius:20px;display:inline-block;margin-bottom:10px}
.hidden{display:none}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}
#splash{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#4e73df,#1cc88a);display:flex;align-items:center;justify-content:center;color:#fff;font-size:40px;z-index:9999;transition:.5s}
</style>
</head>

<body>

<div id="splash">Ù†Ø§Ø·Ø±</div>

<header>
<h1>Ù†Ø§Ø·Ø± | Nater</h1>
<nav>
<button onclick="showVisitor()">ğŸ§ ÙˆØ¶Ø¹ Ø²Ø§Ø¦Ø±</button>
<button onclick="showLogin()">ğŸ‘‘ Ø¯Ø®ÙˆÙ„ Ù…Ø¯ÙŠØ±</button>
<button onclick="toggleDark()">ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ</button>
</nav>
</header>

<div class="container">

<div id="login" class="card hidden">
<h3>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±</h3>
<input type="password" id="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
<button class="main" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div id="admin" class="hidden">
<div class="card">
<h3>Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„</h3>
<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„">
<input id="start" type="number" placeholder="Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø£Ø±Ù‚Ø§Ù…">
<input id="end" type="number" placeholder="Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø£Ø±Ù‚Ø§Ù…">
<button class="main" onclick="addStore()">Ø¥Ø¶Ø§ÙØ©</button>
</div>
</div>

<div id="stores"></div>

</div>

<script>
let password="1234";
let isAdmin=false;
let members=JSON.parse(localStorage.getItem("naterMembers"))||[];

function save(){localStorage.setItem("naterMembers",JSON.stringify(members));render();}
function showLogin(){document.getElementById("login").classList.remove("hidden")}
function showVisitor(){isAdmin=false;document.getElementById("admin").classList.add("hidden");document.getElementById("login").classList.add("hidden");render()}
function login(){if(pass.value===password){isAdmin=true;document.getElementById("admin").classList.remove("hidden");document.getElementById("login").classList.add("hidden")}else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø·Ø£")}
function addStore(){members.push({name:name.value,start:+start.value,end:+end.value,status:{}});save()}

function render(){
let container=document.getElementById("stores");
container.innerHTML="";
members.forEach((m,i)=>{
let readyCount=Object.values(m.status).filter(v=>v).length;
let html=`<div class="card"><h3>${m.name}</h3><span class="badge">Ø¬Ø§Ù‡Ø²: ${readyCount}</span><div class="grid">`;
for(let n=m.start;n<=m.end;n++){
if(!m.status[n]) m.status[n]=false;
html+=`<div class="box ${m.status[n]?'ready':''}" ${isAdmin?`onclick="toggle(${i},${n})"`:''}>
<div>${n}</div>${m.status[n]?'<div class="ready-label">Ø¬Ø§Ù‡Ø²</div>':''}</div>`;
}
html+=`</div></div>`;
container.innerHTML+=html;
});
}

function toggle(i,n){
members[i].status[n]=!members[i].status[n];
beep();
save();
}

function toggleDark(){document.body.classList.toggle("dark")}

function beep(){
let audio=new Audio("https://www.soundjay.com/buttons/sounds/button-3.mp3");
audio.play();
}

if ('serviceWorker' in navigator) {navigator.serviceWorker.register('service-worker.js');}

window.addEventListener("load",()=>{
setTimeout(()=>{document.getElementById("splash").style.opacity="0";
setTimeout(()=>{document.getElementById("splash").style.display="none"},500)},800);
});

render();
</script>

</body>
</html>
