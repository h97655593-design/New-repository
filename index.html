<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ø§Ø·Ø± | Nater</title>

<style>
body{
margin:0;
font-family:'Segoe UI',sans-serif;
direction:rtl;
background:#eef2f7;
}

.header{
background:linear-gradient(135deg,#4e73df,#1cc88a);
color:white;
padding:20px;
text-align:center;
}

.nav{
display:flex;
justify-content:center;
flex-wrap:wrap;
gap:10px;
margin-top:10px;
}

.nav button{
background:white;
border:none;
padding:8px 15px;
border-radius:20px;
cursor:pointer;
font-weight:bold;
}

.section{
display:none;
padding:20px;
max-width:1100px;
margin:auto;
}

.active{display:block;}

.card, .store-card{
background:white;
padding:15px;
border-radius:12px;
box-shadow:0 4px 10px rgba(0,0,0,0.1);
margin-bottom:15px;
}

input,select{
width:100%;
padding:8px;
margin:6px 0;
border-radius:8px;
border:1px solid #ddd;
}

button.action{
background:#4e73df;
color:white;
border:none;
padding:8px;
border-radius:8px;
cursor:pointer;
width:100%;
margin-top:5px;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(55px,1fr));
gap:8px;
margin-top:10px;
}

.box{
width:55px;
height:55px;
display:flex;
align-items:center;
justify-content:center;
border-radius:50%;
font-weight:bold;
color:white;
cursor:pointer;
}

.red{background:#e74a3b;}
.green{background:#1cc88a;}

.badge{
background:#1cc88a;
color:white;
padding:4px 8px;
border-radius:20px;
font-size:12px;
margin-top:5px;
display:inline-block;
}
</style>
</head>

<body>

<div class="header">
<h1>Ù†Ø§Ø·Ø± | Nater</h1>
<div class="nav">
<button onclick="showSection('home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
<button onclick="showSection('restaurants')">Ù…Ø·Ø§Ø¹Ù…</button>
<button onclick="showSection('cafes')">ÙƒØ§ÙÙŠÙ‡</button>
<button onclick="showSection('clinics')">Ø¹ÙŠØ§Ø¯Ø§Øª</button>
<button onclick="showSection('salons')">ØµØ§Ù„ÙˆÙ†Ø§Øª</button>
<button onclick="showSection('admin')">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
</div>
</div>

<!-- Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„ -->
<div id="home" class="section active">
<div class="card">
<h3>Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„</h3>
<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„">
<select id="type">
<option value="Ù…Ø·Ø¹Ù…">Ù…Ø·Ø¹Ù…</option>
<option value="ÙƒØ§ÙÙŠÙ‡">ÙƒØ§ÙÙŠÙ‡</option>
<option value="Ø¹ÙŠØ§Ø¯Ø©">Ø¹ÙŠØ§Ø¯Ø©</option>
<option value="ØµØ§Ù„ÙˆÙ†">ØµØ§Ù„ÙˆÙ†</option>
</select>
<input id="start" type="number" placeholder="Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (Ù„ØºÙŠØ± Ø§Ù„ÙƒØ§ÙÙŠÙ‡)">
<input id="end" type="number" placeholder="Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø£Ø±Ù‚Ø§Ù…">
<input id="chairs" type="number" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØ±Ø§Ø³ÙŠ (Ù„Ù„ÙƒØ§ÙÙŠÙ‡)">
<button class="action" onclick="register()">Ø¥Ø¶Ø§ÙØ©</button>
</div>
</div>

<!-- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
<div id="restaurants" class="section"><h3>ğŸ½ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</h3><input placeholder="Ø¨Ø­Ø«..." onkeyup="search(this,'Ù…Ø·Ø¹Ù…')"><div id="restList"></div></div>
<div id="cafes" class="section"><h3>â˜• Ø§Ù„ÙƒØ§ÙÙŠÙ‡Ø§Øª</h3><input placeholder="Ø¨Ø­Ø«..." onkeyup="search(this,'ÙƒØ§ÙÙŠÙ‡')"><div id="cafeList"></div></div>
<div id="clinics" class="section"><h3>ğŸ¥ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª</h3><input placeholder="Ø¨Ø­Ø«..." onkeyup="search(this,'Ø¹ÙŠØ§Ø¯Ø©')"><div id="clinicList"></div></div>
<div id="salons" class="section"><h3>ğŸ’ˆ Ø§Ù„ØµØ§Ù„ÙˆÙ†Ø§Øª</h3><input placeholder="Ø¨Ø­Ø«..." onkeyup="search(this,'ØµØ§Ù„ÙˆÙ†')"><div id="salonList"></div></div>

<!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
<div id="admin" class="section">
<div class="card">
<h3>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h3>
<div id="adminContent"></div>
</div>
</div>

<script>

let members = JSON.parse(localStorage.getItem("naterMembers")) || [];

function saveData(){
localStorage.setItem("naterMembers",JSON.stringify(members));
renderAll();
}

function showSection(id){
document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function register(){
let m={
name:name.value,
type:type.value,
start:+start.value,
end:+end.value,
chairs:+chairs.value||0,
status:{}
};
members.push(m);
saveData();
alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø­Ù„");
}

function renderAll(){
restList.innerHTML="";
cafeList.innerHTML="";
clinicList.innerHTML="";
salonList.innerHTML="";

members.forEach((m,i)=>{
let readyCount = Object.values(m.status).filter(v=>v).length;
let html=`
<div class="store-card">
<strong>${m.name}</strong><br>
<span class="badge">Ø¬Ø§Ù‡Ø²: ${readyCount}</span>
<button class="action" onclick="openStore(${i})">Ø¯Ø®ÙˆÙ„</button>
</div>
`;

if(m.type==="Ù…Ø·Ø¹Ù…") restList.innerHTML+=html;
if(m.type==="ÙƒØ§ÙÙŠÙ‡") cafeList.innerHTML+=html;
if(m.type==="Ø¹ÙŠØ§Ø¯Ø©") clinicList.innerHTML+=html;
if(m.type==="ØµØ§Ù„ÙˆÙ†") salonList.innerHTML+=html;
});
}

function openStore(i){
let m=members[i];
showSection('admin');
adminContent.innerHTML=`<h3>${m.name}</h3>`;

if(m.type==="ÙƒØ§ÙÙŠÙ‡"){
adminContent.innerHTML+=`
<h4>ğŸª‘ Ø§Ù„ÙƒØ±Ø§Ø³ÙŠ Ø§Ù„Ù…ØªØ§Ø­Ø©: ${m.chairs}</h4>
<button class="action" onclick="updateChairs(${i},1)">â•</button>
<button class="action" onclick="updateChairs(${i},-1)">â–</button>
`;
return;
}

adminContent.innerHTML+=`<div class="grid" id="grid"></div>`;
let grid=document.getElementById("grid");

for(let n=m.start;n<=m.end;n++){
if(!m.status[n]) m.status[n]=false;
let div=document.createElement("div");
div.className="box "+(m.status[n]?"green":"red");
div.innerText=n;
div.onclick=()=>{
m.status[n]=!m.status[n];
saveData();
openStore(i);
};
grid.appendChild(div);
}
}

function updateChairs(i,val){
members[i].chairs+=val;
if(members[i].chairs<0) members[i].chairs=0;
saveData();
openStore(i);
}

function search(input,type){
let value=input.value.toLowerCase();
let list = members.filter(m=>m.type===type && m.name.toLowerCase().includes(value));
document.getElementById(type==="Ù…Ø·Ø¹Ù…"?"restList":
type==="ÙƒØ§ÙÙŠÙ‡"?"cafeList":
type==="Ø¹ÙŠØ§Ø¯Ø©"?"clinicList":"salonList").innerHTML="";
list.forEach((m,i)=>{
document.getElementById(type==="Ù…Ø·Ø¹Ù…"?"restList":
type==="ÙƒØ§ÙÙŠÙ‡"?"cafeList":
type==="Ø¹ÙŠØ§Ø¯Ø©"?"clinicList":"salonList").innerHTML+=`
<div class="store-card">
<strong>${m.name}</strong>
<button class="action" onclick="openStore(${i})">Ø¯Ø®ÙˆÙ„</button>
</div>`;
});
}

renderAll();

</script>

</body>
</html>
