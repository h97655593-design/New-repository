<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ناطر | Nater</title>

<style>
body{
margin:0;
font-family:'Segoe UI',sans-serif;
direction:rtl;
background:#f4f6f9;
}

.header{
background:linear-gradient(135deg,#4e73df,#1cc88a);
color:white;
padding:20px;
text-align:center;
}

.nav{
display:flex;
justify-content:center;
gap:15px;
margin-top:10px;
}

.nav button{
background:white;
color:#333;
border:none;
padding:8px 15px;
border-radius:20px;
cursor:pointer;
font-weight:bold;
}

.section{
display:none;
padding:20px;
max-width:1000px;
margin:auto;
}

.active{
display:block;
}

.card{
background:white;
padding:20px;
border-radius:12px;
box-shadow:0 4px 10px rgba(0,0,0,0.1);
margin-bottom:20px;
}

input,select{
width:100%;
padding:10px;
margin:6px 0;
border-radius:8px;
border:1px solid #ddd;
}

button.action{
background:#4e73df;
color:white;
border:none;
padding:10px;
border-radius:8px;
cursor:pointer;
width:100%;
}

.store-card{
background:white;
padding:15px;
border-radius:12px;
box-shadow:0 4px 10px rgba(0,0,0,0.1);
margin-bottom:15px;
}

.store-card h4{
margin:0 0 5px 0;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(55px,1fr));
gap:10px;
margin-top:15px;
}

.box{
width:55px;
height:55px;
display:flex;
align-items:center;
justify-content:center;
border-radius:50%;
font-weight:bold;
color:white;
cursor:pointer;
}

.red{background:#e74a3b;}
.green{background:#1cc88a;}

.result{
font-weight:bold;
margin-top:10px;
}
</style>
</head>

<body>

<div class="header">
<h1>ناطر | Nater</h1>
<div class="nav">
<button onclick="showSection('home')">الرئيسية</button>
<button onclick="showSection('add')">إضافة محل</button>
<button onclick="showSection('admin')">لوحة التحكم</button>
</div>
</div>

<!-- الصفحة الرئيسية -->
<div id="home" class="section active">
<h3>المحلات المتاحة</h3>
<div id="storesList"></div>
</div>

<!-- إضافة محل -->
<div id="add" class="section">
<div class="card">
<h3>إضافة محل جديد</h3>
<input id="name" placeholder="اسم المحل">
<select id="type">
<option value="مطعم">مطعم</option>
<option value="صالون">صالون</option>
<option value="عيادة">عيادة</option>
<option value="كافيه">كافيه</option>
</select>
<input id="start" type="number" placeholder="بداية الأرقام">
<input id="end" type="number" placeholder="نهاية الأرقام">
<button class="action" onclick="register()">إضافة</button>
</div>
</div>

<!-- لوحة التحكم -->
<div id="admin" class="section">
<div class="card">
<h3>لوحة الماستر</h3>
<input id="masterPass" type="password" placeholder="كلمة المرور">
<button class="action" onclick="loginMaster()">دخول</button>
<div id="adminContent"></div>
</div>
</div>

<script>

let members = JSON.parse(localStorage.getItem("naterMembers")) || [];
let masterPassword = "1234";

function saveData(){
localStorage.setItem("naterMembers",JSON.stringify(members));
renderStores();
}

function showSection(id){
document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function register(){
let m={
name:name.value,
type:type.value,
start:+start.value,
end:+end.value,
status:{}
};
members.push(m);
saveData();
alert("تم إضافة المحل");
showSection('home');
}

function renderStores(){
let list=document.getElementById("storesList");
list.innerHTML="";
members.forEach((m,i)=>{
list.innerHTML+=`
<div class="store-card">
<h4>${m.name}</h4>
<p>${m.type}</p>
<button onclick="openStore(${i})">دخول</button>
</div>
`;
});
}

function openStore(i){
let m=members[i];
showSection('home');
document.getElementById("storesList").innerHTML=`
<h3>${m.name}</h3>
<div class="grid" id="grid"></div>
`;
let grid=document.getElementById("grid");

for(let n=m.start;n<=m.end;n++){
if(!m.status[n]) m.status[n]=false;
let div=document.createElement("div");
div.className="box "+(m.status[n]?"green":"red");
div.innerText=n;
grid.appendChild(div);
}
}

function loginMaster(){
if(masterPass.value!==masterPassword){
alert("كلمة المرور خطأ");
return;
}
adminContent.innerHTML="تم الدخول بنجاح";
}

renderStores();

</script>

</body>
</html>
